{"version":3,"file":"alt.es6.js","sources":["../node_modules/fbjs/lib/invariant.js","../node_modules/flux/lib/Dispatcher.js","../node_modules/flux/index.js","../src/functions.js","../src/utils/StateFunctions.js","../src/utils/AltUtils.js","../node_modules/transmitter/dist/transmitter.js","../src/store/AltStore.js","../src/store/StoreMixin.js","../src/store/index.js","../node_modules/is-promise/index.js","../src/actions/index.js","../src/index.js"],"sourcesContent":["/**\n * Copyright 2013-2015, Facebook, Inc.\n * All rights reserved.\n *\n * This source code is licensed under the BSD-style license found in the\n * LICENSE file in the root directory of this source tree. An additional grant\n * of patent rights can be found in the PATENTS file in the same directory.\n *\n * @providesModule invariant\n */\n\n\"use strict\";\n\n/**\n * Use invariant() to assert state which your program assumes to be true.\n *\n * Provide sprintf-style format (only %s is supported) and arguments\n * to provide information about what broke and what you were\n * expecting.\n *\n * The invariant message will be stripped in production, but the invariant\n * will remain to ensure logic does not differ in production.\n */\n\nvar invariant = function (condition, format, a, b, c, d, e, f) {\n  if (process.env.NODE_ENV !== 'production') {\n    if (format === undefined) {\n      throw new Error('invariant requires an error message argument');\n    }\n  }\n\n  if (!condition) {\n    var error;\n    if (format === undefined) {\n      error = new Error('Minified exception occurred; use the non-minified dev environment ' + 'for the full error message and additional helpful warnings.');\n    } else {\n      var args = [a, b, c, d, e, f];\n      var argIndex = 0;\n      error = new Error('Invariant Violation: ' + format.replace(/%s/g, function () {\n        return args[argIndex++];\n      }));\n    }\n\n    error.framesToPop = 1; // we don't care about invariant's own frame\n    throw error;\n  }\n};\n\nmodule.exports = invariant;","/**\n * Copyright (c) 2014-2015, Facebook, Inc.\n * All rights reserved.\n *\n * This source code is licensed under the BSD-style license found in the\n * LICENSE file in the root directory of this source tree. An additional grant\n * of patent rights can be found in the PATENTS file in the same directory.\n *\n * @providesModule Dispatcher\n * \n * @preventMunge\n */\n\n'use strict';\n\nexports.__esModule = true;\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError('Cannot call a class as a function'); } }\n\nvar invariant = require('fbjs/lib/invariant');\n\nvar _prefix = 'ID_';\n\n/**\n * Dispatcher is used to broadcast payloads to registered callbacks. This is\n * different from generic pub-sub systems in two ways:\n *\n *   1) Callbacks are not subscribed to particular events. Every payload is\n *      dispatched to every registered callback.\n *   2) Callbacks can be deferred in whole or part until other callbacks have\n *      been executed.\n *\n * For example, consider this hypothetical flight destination form, which\n * selects a default city when a country is selected:\n *\n *   var flightDispatcher = new Dispatcher();\n *\n *   // Keeps track of which country is selected\n *   var CountryStore = {country: null};\n *\n *   // Keeps track of which city is selected\n *   var CityStore = {city: null};\n *\n *   // Keeps track of the base flight price of the selected city\n *   var FlightPriceStore = {price: null}\n *\n * When a user changes the selected city, we dispatch the payload:\n *\n *   flightDispatcher.dispatch({\n *     actionType: 'city-update',\n *     selectedCity: 'paris'\n *   });\n *\n * This payload is digested by `CityStore`:\n *\n *   flightDispatcher.register(function(payload) {\n *     if (payload.actionType === 'city-update') {\n *       CityStore.city = payload.selectedCity;\n *     }\n *   });\n *\n * When the user selects a country, we dispatch the payload:\n *\n *   flightDispatcher.dispatch({\n *     actionType: 'country-update',\n *     selectedCountry: 'australia'\n *   });\n *\n * This payload is digested by both stores:\n *\n *   CountryStore.dispatchToken = flightDispatcher.register(function(payload) {\n *     if (payload.actionType === 'country-update') {\n *       CountryStore.country = payload.selectedCountry;\n *     }\n *   });\n *\n * When the callback to update `CountryStore` is registered, we save a reference\n * to the returned token. Using this token with `waitFor()`, we can guarantee\n * that `CountryStore` is updated before the callback that updates `CityStore`\n * needs to query its data.\n *\n *   CityStore.dispatchToken = flightDispatcher.register(function(payload) {\n *     if (payload.actionType === 'country-update') {\n *       // `CountryStore.country` may not be updated.\n *       flightDispatcher.waitFor([CountryStore.dispatchToken]);\n *       // `CountryStore.country` is now guaranteed to be updated.\n *\n *       // Select the default city for the new country\n *       CityStore.city = getDefaultCityForCountry(CountryStore.country);\n *     }\n *   });\n *\n * The usage of `waitFor()` can be chained, for example:\n *\n *   FlightPriceStore.dispatchToken =\n *     flightDispatcher.register(function(payload) {\n *       switch (payload.actionType) {\n *         case 'country-update':\n *         case 'city-update':\n *           flightDispatcher.waitFor([CityStore.dispatchToken]);\n *           FlightPriceStore.price =\n *             getFlightPriceStore(CountryStore.country, CityStore.city);\n *           break;\n *     }\n *   });\n *\n * The `country-update` payload will be guaranteed to invoke the stores'\n * registered callbacks in order: `CountryStore`, `CityStore`, then\n * `FlightPriceStore`.\n */\n\nvar Dispatcher = (function () {\n  function Dispatcher() {\n    _classCallCheck(this, Dispatcher);\n\n    this._callbacks = {};\n    this._isDispatching = false;\n    this._isHandled = {};\n    this._isPending = {};\n    this._lastID = 1;\n  }\n\n  /**\n   * Registers a callback to be invoked with every dispatched payload. Returns\n   * a token that can be used with `waitFor()`.\n   */\n\n  Dispatcher.prototype.register = function register(callback) {\n    var id = _prefix + this._lastID++;\n    this._callbacks[id] = callback;\n    return id;\n  };\n\n  /**\n   * Removes a callback based on its token.\n   */\n\n  Dispatcher.prototype.unregister = function unregister(id) {\n    !this._callbacks[id] ? process.env.NODE_ENV !== 'production' ? invariant(false, 'Dispatcher.unregister(...): `%s` does not map to a registered callback.', id) : invariant(false) : undefined;\n    delete this._callbacks[id];\n  };\n\n  /**\n   * Waits for the callbacks specified to be invoked before continuing execution\n   * of the current callback. This method should only be used by a callback in\n   * response to a dispatched payload.\n   */\n\n  Dispatcher.prototype.waitFor = function waitFor(ids) {\n    !this._isDispatching ? process.env.NODE_ENV !== 'production' ? invariant(false, 'Dispatcher.waitFor(...): Must be invoked while dispatching.') : invariant(false) : undefined;\n    for (var ii = 0; ii < ids.length; ii++) {\n      var id = ids[ii];\n      if (this._isPending[id]) {\n        !this._isHandled[id] ? process.env.NODE_ENV !== 'production' ? invariant(false, 'Dispatcher.waitFor(...): Circular dependency detected while ' + 'waiting for `%s`.', id) : invariant(false) : undefined;\n        continue;\n      }\n      !this._callbacks[id] ? process.env.NODE_ENV !== 'production' ? invariant(false, 'Dispatcher.waitFor(...): `%s` does not map to a registered callback.', id) : invariant(false) : undefined;\n      this._invokeCallback(id);\n    }\n  };\n\n  /**\n   * Dispatches a payload to all registered callbacks.\n   */\n\n  Dispatcher.prototype.dispatch = function dispatch(payload) {\n    !!this._isDispatching ? process.env.NODE_ENV !== 'production' ? invariant(false, 'Dispatch.dispatch(...): Cannot dispatch in the middle of a dispatch.') : invariant(false) : undefined;\n    this._startDispatching(payload);\n    try {\n      for (var id in this._callbacks) {\n        if (this._isPending[id]) {\n          continue;\n        }\n        this._invokeCallback(id);\n      }\n    } finally {\n      this._stopDispatching();\n    }\n  };\n\n  /**\n   * Is this Dispatcher currently dispatching.\n   */\n\n  Dispatcher.prototype.isDispatching = function isDispatching() {\n    return this._isDispatching;\n  };\n\n  /**\n   * Call the callback stored with the given id. Also do some internal\n   * bookkeeping.\n   *\n   * @internal\n   */\n\n  Dispatcher.prototype._invokeCallback = function _invokeCallback(id) {\n    this._isPending[id] = true;\n    this._callbacks[id](this._pendingPayload);\n    this._isHandled[id] = true;\n  };\n\n  /**\n   * Set up bookkeeping needed when dispatching.\n   *\n   * @internal\n   */\n\n  Dispatcher.prototype._startDispatching = function _startDispatching(payload) {\n    for (var id in this._callbacks) {\n      this._isPending[id] = false;\n      this._isHandled[id] = false;\n    }\n    this._pendingPayload = payload;\n    this._isDispatching = true;\n  };\n\n  /**\n   * Clear bookkeeping used for dispatching.\n   *\n   * @internal\n   */\n\n  Dispatcher.prototype._stopDispatching = function _stopDispatching() {\n    delete this._pendingPayload;\n    this._isDispatching = false;\n  };\n\n  return Dispatcher;\n})();\n\nmodule.exports = Dispatcher;","/**\n * Copyright (c) 2014-2015, Facebook, Inc.\n * All rights reserved.\n *\n * This source code is licensed under the BSD-style license found in the\n * LICENSE file in the root directory of this source tree. An additional grant\n * of patent rights can be found in the PATENTS file in the same directory.\n */\n\nmodule.exports.Dispatcher = require('./lib/Dispatcher');\n","export const isFunction = x => typeof x === 'function'\n\nexport function isMutableObject(target) {\n  const Ctor = target.constructor\n\n  return (\n    !!target\n    &&\n    Object.prototype.toString.call(target) === '[object Object]'\n    &&\n    isFunction(Ctor)\n    &&\n    !Object.isFrozen(target)\n    &&\n    (Ctor instanceof Ctor || target.type === 'AltStore')\n  )\n}\n\nexport function eachObject(f, o) {\n  o.forEach((from) => {\n    Object.keys(Object(from)).forEach((key) => {\n      f(key, from[key])\n    })\n  })\n}\n\nexport function assign(target, ...source) {\n  eachObject((key, value) => target[key] = value, source)\n  return target\n}\n","import * as fn from '../functions'\n\nexport function setAppState(instance, data, onStore) {\n  const obj = instance.deserialize(data)\n  fn.eachObject((key, value) => {\n    const store = instance.stores[key]\n    if (store) {\n      const { config } = store.StoreModel\n      const state = store.state\n      if (config.onDeserialize) obj[key] = config.onDeserialize(value) || value\n      if (fn.isMutableObject(state)) {\n        // If we are assigning the new values \"merging\" with the old ones, why would we delete everything first?\n        // fn.eachObject(k => delete state[k], [state])\n        fn.assign(state, obj[key])\n      } else {\n        store.state = obj[key]\n      }\n      onStore(store, store.state)\n    }\n  }, [obj])\n}\n\nexport function snapshot(instance, storeNames = []) {\n  const stores = storeNames.length ? storeNames : Object.keys(instance.stores)\n  return stores.reduce((obj, storeHandle) => {\n    const storeName = storeHandle.displayName || storeHandle\n    const store = instance.stores[storeName]\n    const { config } = store.StoreModel\n    store.lifecycle('snapshot')\n    const customSnapshot = config.onSerialize &&\n      config.onSerialize(store.state)\n    obj[storeName] = customSnapshot ? customSnapshot : store.getState()\n    return obj\n  }, {})\n}\n\nexport function saveInitialSnapshot(instance, key) {\n  const state = instance.deserialize(\n    instance.serialize(instance.stores[key].state)\n  )\n  instance._initSnapshot[key] = state\n  instance._lastSnapshot[key] = state\n}\n\nexport function filterSnapshots(instance, state, stores) {\n  return stores.reduce((obj, store) => {\n    const storeName = store.displayName || store\n    if (!state[storeName]) {\n      throw new ReferenceError(`${storeName} is not a valid store`)\n    }\n    obj[storeName] = state[storeName]\n    return obj\n  }, {})\n}\n","import * as fn from '../functions'\n\n/*eslint-disable*/\nconst builtIns = Object.getOwnPropertyNames(NoopClass)\nconst builtInProto = Object.getOwnPropertyNames(NoopClass.prototype)\n/*eslint-enable*/\n\nexport function getInternalMethods(Obj, isProto) {\n  const excluded = isProto ? builtInProto : builtIns\n  const obj = isProto && typeof Obj === 'function' ? Obj.prototype : Obj\n  return Object.getOwnPropertyNames(obj).reduce((value, m) => {\n    if (excluded.indexOf(m) !== -1) {\n      return value\n    }\n\n    value[m] = obj[m]\n    return value\n  }, {})\n}\n\nexport function getPrototypeChain(Obj, methods = {}) {\n  return Obj === Object.prototype\n    ? methods\n    : getPrototypeChain(\n        Object.getPrototypeOf((typeof Obj === 'function') ? Obj.prototype : Obj),\n        fn.assign(getInternalMethods(Obj, true), methods)\n      )\n}\n\nexport function warn(msg) {\n  /* istanbul ignore else */\n  /*eslint-disable*/\n  if (typeof console !== 'undefined') {\n    console.warn(new ReferenceError(msg))\n  }\n  /*eslint-enable*/\n}\n\nexport function uid(container, name) {\n  let count = 0\n  let key = name\n  while (Object.hasOwnProperty.call(container, key)) {\n    key = name + String(++count)\n  }\n  return key\n}\n\nexport function formatAsConstant(name) {\n  return name.replace(/[a-z]([A-Z])/g, (i) => {\n    return `${i[0]}_${i[1].toLowerCase()}`\n  }).toUpperCase()\n}\n\nexport function dispatchIdentity(x, ...a) {\n  if (x === undefined) return null\n  return a.length ? [x].concat(a) : x\n}\n\nexport function fsa(id, type, payload, details) {\n  return {\n    type,\n    payload,\n    meta: {\n      dispatchId: id,\n      ...details,\n    },\n\n    id,\n    action: type,\n    data: payload,\n    details,\n  }\n}\n\nexport function dispatch(id, actionObj, payload, alt) {\n  const data = actionObj.dispatch(payload)\n  if (data === undefined) return null\n\n  const type = actionObj.id\n  const namespace = type\n  const name = type\n  const details = { id: type, namespace, name }\n\n  const dispatchLater = x => alt.dispatch(type, x, details)\n\n  if (fn.isFunction(data)) return data(dispatchLater, alt)\n\n    // XXX standardize this\n  return alt.dispatcher.dispatch(fsa(id, type, data, details))\n}\n\n/* istanbul ignore next */\nfunction NoopClass() { }\n","\"use strict\";\n\nfunction transmitter() {\n  var subscriptions = [];\n  var nowDispatching = false;\n  var toUnsubscribe = {};\n\n  var unsubscribe = function unsubscribe(onChange) {\n    var id = subscriptions.indexOf(onChange);\n    if (id < 0) return;\n    if (nowDispatching) {\n      toUnsubscribe[id] = onChange;\n      return;\n    }\n    subscriptions.splice(id, 1);\n  };\n\n  var subscribe = function subscribe(onChange) {\n    var id = subscriptions.push(onChange);\n    var dispose = function dispose() {\n      return unsubscribe(onChange);\n    };\n    return { dispose: dispose };\n  };\n\n  var publish = function publish() {\n    for (var _len = arguments.length, args = Array(_len), _key = 0; _key < _len; _key++) {\n      args[_key] = arguments[_key];\n    }\n\n    nowDispatching = true;\n    try {\n      subscriptions.forEach(function (subscription, id) {\n        return toUnsubscribe[id] || subscription.apply(undefined, args);\n      });\n    } finally {\n      nowDispatching = false;\n      Object.keys(toUnsubscribe).forEach(function (id) {\n        return unsubscribe(toUnsubscribe[id]);\n      });\n      toUnsubscribe = {};\n    }\n  };\n\n  return {\n    publish: publish,\n    subscribe: subscribe,\n    $subscriptions: subscriptions\n  };\n}\n\nmodule.exports = transmitter;","import * as fn from '../functions'\nimport transmitter from 'transmitter'\n\nclass AltStore {\n  constructor(alt, model, state, StoreModel) {\n    const lifecycleEvents = model.lifecycleEvents\n    this.transmitter = transmitter()\n    this.lifecycle = (event, x) => {\n      if (lifecycleEvents[event]) lifecycleEvents[event].publish(x)\n    }\n    this.state = state\n\n    this.alt = alt\n    this.preventDefault = false\n    this.displayName = model.displayName\n    this.boundListeners = model.boundListeners\n    this.StoreModel = StoreModel\n    this.reduce = model.reduce || (x => x)\n    this.subscriptions = []\n\n    const output = model.output || (x => x)\n\n    this.emitChange = () => this.transmitter.publish(output(this.state))\n\n    const handleDispatch = (f, payload) => {\n      try {\n        return f()\n      } catch (e) {\n        if (model.handlesOwnErrors) {\n          this.lifecycle('error', {\n            error: e,\n            payload,\n            state: this.state,\n          })\n          return false\n        }\n\n        throw e\n      }\n    }\n\n    fn.assign(this, model.publicMethods)\n\n    // Register dispatcher\n    this.dispatchToken = alt.dispatcher.register((payload) => {\n      this.preventDefault = false\n\n      this.lifecycle('beforeEach', {\n        payload,\n        state: this.state,\n      })\n\n      const actionHandlers = model.actionListeners[payload.action]\n\n      if (actionHandlers || model.otherwise) {\n        let result\n\n        if (actionHandlers) {\n          result = handleDispatch(() => {\n            return actionHandlers.filter(Boolean).every((handler) => {\n              return handler.call(model, payload.data, payload.action) !== false\n            })\n          }, payload)\n        } else {\n          result = handleDispatch(() => {\n            return model.otherwise(payload.data, payload.action)\n          }, payload)\n        }\n\n        if (result !== false && !this.preventDefault) this.emitChange()\n      }\n\n      if (model.reduce) {\n        handleDispatch(() => {\n          const value = model.reduce(this.state, payload)\n          if (value !== undefined) this.state = value\n        }, payload)\n        if (!this.preventDefault) this.emitChange()\n      }\n\n      this.lifecycle('afterEach', {\n        payload,\n        state: this.state,\n      })\n    })\n\n    this.lifecycle('init')\n  }\n\n  listen(cb) {\n    if (!fn.isFunction(cb)) throw new TypeError('listen expects a function')\n    const { dispose } = this.transmitter.subscribe(cb)\n    this.subscriptions.push({ cb, dispose })\n    return () => {\n      this.lifecycle('unlisten')\n      dispose()\n    }\n  }\n\n  unlisten(cb) {\n    this.lifecycle('unlisten')\n    this.subscriptions\n      .filter(subscription => subscription.cb === cb)\n      .forEach(subscription => subscription.dispose())\n  }\n\n  getState() {\n    return this.StoreModel.config.getState.call(this, this.state)\n  }\n}\n\nexport default AltStore\n","import transmitter from 'transmitter'\nimport * as fn from '../functions'\n\nconst StoreMixin = {\n  waitFor(...sources) {\n    if (!sources.length) {\n      throw new ReferenceError('Dispatch tokens not provided')\n    }\n\n    let sourcesArray = sources\n    if (sources.length === 1) {\n      sourcesArray = Array.isArray(sources[0]) ? sources[0] : sources\n    }\n\n    const tokens = sourcesArray.map((source) => {\n      return source.dispatchToken || source\n    })\n\n    this.dispatcher.waitFor(tokens)\n  },\n\n  exportAsync(asyncMethods) {\n    this.registerAsync(asyncMethods)\n  },\n\n  registerAsync(asyncDef) {\n    let loadCounter = 0\n\n    const asyncMethods = fn.isFunction(asyncDef)\n      ? asyncDef(this.alt)\n      : asyncDef\n\n    const toExport = Object.keys(asyncMethods).reduce((publicMethods, methodName) => {\n      const desc = asyncMethods[methodName]\n      const spec = fn.isFunction(desc) ? desc(this) : desc\n\n      const validHandlers = ['success', 'error', 'loading']\n      validHandlers.forEach((handler) => {\n        if (spec[handler] && !spec[handler].id) {\n          throw new Error(`${handler} handler must be an action function`)\n        }\n      })\n\n      publicMethods[methodName] = (...args) => {\n        const state = this.getInstance().getState()\n        const value = spec.local && spec.local(state, ...args)\n        const shouldFetch = spec.shouldFetch\n          ? spec.shouldFetch(state, ...args)\n          /*eslint-disable*/\n          : value == null\n          /*eslint-enable*/\n        const intercept = spec.interceptResponse || (x => x)\n\n        const makeActionHandler = (action, isError) => {\n          return (x) => {\n            const fire = () => {\n              loadCounter -= 1\n              action(intercept(x, action, args))\n              if (isError) throw x\n              return x\n            }\n            return this.alt.trapAsync ? () => fire() : fire()\n          }\n        }\n\n        // if we don't have it in cache then fetch it\n        if (shouldFetch) {\n          loadCounter += 1\n          /* istanbul ignore else */\n          if (spec.loading) spec.loading(intercept(null, spec.loading, args))\n          return spec.remote(state, ...args).then(\n            makeActionHandler(spec.success),\n            makeActionHandler(spec.error, 1)\n          )\n        }\n\n        // otherwise emit the change now\n        this.emitChange()\n        return value\n      }\n\n      return publicMethods\n    }, {})\n\n    this.exportPublicMethods(toExport)\n    this.exportPublicMethods({\n      isLoading: () => loadCounter > 0,\n    })\n  },\n\n  exportPublicMethods(methods) {\n    fn.eachObject((methodName, value) => {\n      if (!fn.isFunction(value)) {\n        throw new TypeError('exportPublicMethods expects a function')\n      }\n\n      this.publicMethods[methodName] = value\n    }, [methods])\n  },\n\n  emitChange() {\n    this.getInstance().emitChange()\n  },\n\n  on(lifecycleEvent, handler) {\n    if (lifecycleEvent === 'error') this.handlesOwnErrors = true\n    const bus = this.lifecycleEvents[lifecycleEvent] || transmitter()\n    this.lifecycleEvents[lifecycleEvent] = bus\n    return bus.subscribe(handler.bind(this))\n  },\n\n  bindAction(symbol, handler) {\n    if (!symbol) {\n      throw new ReferenceError('Invalid action reference passed in')\n    }\n    if (!fn.isFunction(handler)) {\n      throw new TypeError('bindAction expects a function')\n    }\n\n    // You can pass in the constant or the function itself\n    const key = symbol.id ? symbol.id : symbol\n    this.actionListeners[key] = this.actionListeners[key] || []\n    this.actionListeners[key].push(handler.bind(this))\n    this.boundListeners.push(key)\n  },\n\n  bindActions(actions) {\n    fn.eachObject((action, symbol) => {\n      const matchFirstCharacter = /./\n      const assumedEventHandler = action.replace(matchFirstCharacter, (x) => {\n        return `on${x[0].toUpperCase()}`\n      })\n\n      if (this[action] && this[assumedEventHandler]) {\n        // If you have both action and onAction\n        throw new ReferenceError(\n          `You have multiple action handlers bound to an action: ` +\n          `${action} and ${assumedEventHandler}`\n        )\n      }\n\n      const handler = this[action] || this[assumedEventHandler]\n      if (handler) {\n        this.bindAction(symbol, handler)\n      }\n    }, [actions])\n  },\n\n  bindListeners(obj) {\n    fn.eachObject((methodName, symbol) => {\n      const listener = this[methodName]\n\n      if (!listener) {\n        throw new ReferenceError(\n          `${methodName} defined but does not exist in ${this.displayName}`\n        )\n      }\n\n      if (Array.isArray(symbol)) {\n        symbol.forEach((action) => {\n          this.bindAction(action, listener)\n        })\n      } else {\n        this.bindAction(symbol, listener)\n      }\n    }, [obj])\n  },\n}\n\nexport default StoreMixin\n","import * as utils from '../utils/AltUtils'\nimport * as fn from '../functions'\nimport AltStore from './AltStore'\nimport StoreMixin from './StoreMixin'\n\nfunction doSetState(store, storeInstance, state) {\n  if (!state) {\n    return\n  }\n\n  const { config } = storeInstance.StoreModel\n\n  const nextState = fn.isFunction(state)\n    ? state(storeInstance.state)\n    : state\n\n  storeInstance.state = config.setState.call(\n    store,\n    storeInstance.state,\n    nextState\n  )\n\n  if (!store.alt.dispatcher.isDispatching()) {\n    store.emitChange()\n  }\n}\n\nfunction createPrototype(proto, alt, key, extras) {\n  return fn.assign(proto, StoreMixin, {\n    displayName: key,\n    alt: alt,\n    dispatcher: alt.dispatcher,\n    preventDefault() {\n      this.getInstance().preventDefault = true\n    },\n    boundListeners: [],\n    lifecycleEvents: {},\n    actionListeners: {},\n    publicMethods: {},\n    handlesOwnErrors: false,\n  }, extras)\n}\n\nexport function createStoreConfig(globalConfig, StoreModel) {\n  StoreModel.config = fn.assign({\n    getState(state) {\n      if (Array.isArray(state)) {\n        return state.slice()\n      } else if (fn.isMutableObject(state)) {\n        return fn.assign({}, state)\n      }\n\n      return state\n    },\n    setState(currentState, nextState) {\n      if (fn.isMutableObject(nextState)) {\n        return fn.assign(currentState, nextState)\n      }\n      return nextState\n    },\n  }, globalConfig, StoreModel.config)\n}\n\nexport function transformStore(transforms, StoreModel) {\n  return transforms.reduce((Store, transform) => transform(Store), StoreModel)\n}\n\nexport function createStoreFromObject(alt, StoreModel, key) {\n  let storeInstance\n\n  const StoreProto = createPrototype({}, alt, key, fn.assign({\n    getInstance() {\n      return storeInstance\n    },\n    setState(nextState) {\n      doSetState(this, storeInstance, nextState)\n    },\n  }, StoreModel))\n\n  // bind the store listeners\n  /* istanbul ignore else */\n  if (StoreProto.bindListeners) {\n    StoreMixin.bindListeners.call(\n      StoreProto,\n      StoreProto.bindListeners,\n    )\n  }\n  /* istanbul ignore else */\n  if (StoreProto.observe) {\n    StoreMixin.bindListeners.call(\n      StoreProto,\n      StoreProto.observe(alt),\n    )\n  }\n\n  // bind the lifecycle events\n  /* istanbul ignore else */\n  if (StoreProto.lifecycle) {\n    fn.eachObject((eventName, event) => {\n      StoreMixin.on.call(StoreProto, eventName, event)\n    }, [StoreProto.lifecycle])\n  }\n\n  // create the instance and fn.assign the public methods to the instance\n  storeInstance = fn.assign(\n    new AltStore(\n      alt,\n      StoreProto,\n      StoreProto.state !== undefined ? StoreProto.state : {},\n      StoreModel\n    ),\n    StoreProto.publicMethods,\n    {\n      displayName: key,\n      config: StoreModel.config,\n    }\n  )\n\n  return storeInstance\n}\n\nexport function createStoreFromClass(alt, StoreModel, key, ...argsForClass) {\n  let storeInstance\n  const { config } = StoreModel\n\n  // Creating a class here so we don't overload the provided store's\n  // prototype with the mixin behaviour and I'm extending from StoreModel\n  // so we can inherit any extensions from the provided store.\n  class Store extends StoreModel {\n    constructor(a1,a2,a3,a4,a5,a6,a7,a8) {\n      super(a1,a2,a3,a4,a5,a6,a7,a8)\n    }\n  }\n\n  createPrototype(Store.prototype, alt, key, {\n    type: 'AltStore',\n    getInstance() {\n      return storeInstance\n    },\n    setState(nextState) {\n      doSetState(this, storeInstance, nextState)\n    },\n  })\n\n  const store = new Store(...argsForClass)\n\n  /* istanbul ignore next */\n  if (config.bindListeners) store.bindListeners(config.bindListeners)\n    /* istanbul ignore next */\n  if (config.datasource) store.registerAsync(config.datasource)\n\n  storeInstance = fn.assign(\n    new AltStore(\n      alt,\n      store,\n      store.state !== undefined ? store.state : store,\n      StoreModel\n    ),\n    utils.getInternalMethods(StoreModel),\n    config.publicMethods,\n    { displayName: key },\n  )\n\n  return storeInstance\n}\n","module.exports = isPromise;\n\nfunction isPromise(obj) {\n  return !!obj && (typeof obj === 'object' || typeof obj === 'function') && typeof obj.then === 'function';\n}\n","import * as fn from '../functions'\nimport * as utils from '../utils/AltUtils'\nimport isPromise from 'is-promise'\n\nexport default function makeAction(alt, namespace, name, implementation, obj) {\n  const id = utils.uid(alt._actionsRegistry, `${namespace}.${name}`)\n  alt._actionsRegistry[id] = 1\n\n\n  let logAs\n  let storeStateToLog\n  // Set action's log level\n  if (typeof Reflect === 'object' && fn.isFunction(Reflect.getOwnMetadata)) {\n    logAs = Reflect.getOwnMetadata('alt:meta:logAs', implementation)\n  }\n  // Set action's additional store state data\n  if (typeof Reflect === 'object' && fn.isFunction(Reflect.getOwnMetadata)) {\n    storeStateToLog = Reflect.getOwnMetadata(\n      'alt:meta:storeStateToLog',\n      implementation\n    )\n  }\n\n  const data = { id, namespace, name, logAs, storeStateToLog }\n\n  const dispatch = (payload) => alt.dispatch(id, payload, data)\n\n  // the action itself\n  const action = (...args) => {\n    let inject\n    // check for action's implementation metadata if dispatch should be injected\n    // for example when decorated via @Reflect.metadata\n    // (https://github.com/rbuckton/ReflectDecorators#syntax)\n    if (typeof Reflect === 'object' && fn.isFunction(Reflect.getOwnMetadata)) {\n      inject = Reflect.getOwnMetadata('alt:injectDispatch', implementation)\n\n      if (inject === true) {\n        // diff number of declared arguments and number of passed in arguments\n        const diff = implementation.length - args.length\n\n        if (diff > 0) {\n          const optionalArgs = Array.apply(null, Array(diff))\n          // explicitely pass optional parameters as undefined\n          args.push.apply(args, optionalArgs)\n        }\n\n        // pass dispatch as the n+1 th parameter to action implementation\n        args.push(dispatch)\n      }\n    }\n\n    const invocationResult = implementation.apply(obj, args)\n\n    let actionResult = invocationResult\n\n    // async functions that return promises should not be dispatched\n    if (invocationResult !== undefined && !isPromise(invocationResult)) {\n      if (fn.isFunction(invocationResult)) {\n        // inner function result should be returned as an action result\n        actionResult = invocationResult(dispatch, alt)\n      } else {\n        if (!inject) {\n          dispatch(invocationResult)\n        }\n      }\n    }\n\n    if (!inject && invocationResult === undefined) {\n      utils.warn('An action was called but nothing was dispatched')\n    }\n\n    return actionResult\n  }\n  action.defer = (...args) => setTimeout(() => action.apply(null, args))\n  action.id = id\n  action.data = data\n  action.dispatch = dispatch\n\n  // ensure each reference is unique in the namespace\n  const container = alt.actions[namespace]\n  const namespaceId = utils.uid(container, name)\n  container[namespaceId] = action\n\n  // generate a constant\n  const constant = utils.formatAsConstant(namespaceId)\n  container[constant] = id\n\n  return action\n}\n","/* global window */\nimport { Dispatcher } from 'flux'\n\nimport * as StateFunctions from './utils/StateFunctions'\nimport * as fn from './functions'\nimport * as store from './store'\nimport * as utils from './utils/AltUtils'\nimport makeAction from './actions'\n\nclass Alt {\n  constructor(config = {}) {\n    this.config = config\n    this.serialize = config.serialize || JSON.stringify\n    this.deserialize = config.deserialize || JSON.parse\n    this.dispatcher = config.dispatcher || new Dispatcher()\n    this.batchingFunction = config.batchingFunction || (callback => callback())\n    this.actions = { global: {} }\n    this.stores = {}\n    this.storeTransforms = config.storeTransforms || []\n    this.trapAsync = false\n    this._actionsRegistry = {}\n    this._initSnapshot = {}\n    this._lastSnapshot = {}\n  }\n\n  dispatch(action, data, details) {\n    this.batchingFunction(() => {\n      const id = Math.random().toString(18).substr(2, 16)\n\n      // support straight dispatching of FSA-style actions\n      if (action.hasOwnProperty('type') && action.hasOwnProperty('payload')) {\n        const fsaDetails = {\n          id: action.type,\n          namespace: action.type,\n          name: action.type,\n        }\n        return this.dispatcher.dispatch(\n          utils.fsa(id, action.type, action.payload, fsaDetails)\n        )\n      }\n\n      if (action.id && action.dispatch) {\n        return utils.dispatch(id, action, data, this)\n      }\n\n      return this.dispatcher.dispatch(utils.fsa(id, action, data, details))\n    })\n  }\n\n  createUnsavedStore(StoreModel, ...args) {\n    const key = StoreModel.displayName || ''\n    store.createStoreConfig(this.config, StoreModel)\n    const Store = store.transformStore(this.storeTransforms, StoreModel)\n\n    return fn.isFunction(Store)\n      ? store.createStoreFromClass(this, Store, key, ...args)\n      : store.createStoreFromObject(this, Store, key)\n  }\n\n  createStore(StoreModel, iden, ...args) {\n    let key = iden || StoreModel.displayName || StoreModel.name || ''\n    store.createStoreConfig(this.config, StoreModel)\n    const Store = store.transformStore(this.storeTransforms, StoreModel)\n\n    /* istanbul ignore next */\n    if (module.hot) delete this.stores[key]\n\n    if (this.stores[key] || !key) {\n      if (this.stores[key]) {\n        utils.warn(\n          `A store named ${key} already exists, double check your store ` +\n          `names or pass in your own custom identifier for each store`\n        )\n      } else {\n        utils.warn('Store name was not specified')\n      }\n\n      key = utils.uid(this.stores, key)\n    }\n\n    const storeInstance = fn.isFunction(Store)\n      ? store.createStoreFromClass(this, Store, key, ...args)\n      : store.createStoreFromObject(this, Store, key)\n\n    this.stores[key] = storeInstance\n    StateFunctions.saveInitialSnapshot(this, key)\n\n    return storeInstance\n  }\n\n  generateActions(...actionNames) {\n    const actions = { name: 'global' }\n    return this.createActions(actionNames.reduce((obj, action) => {\n      obj[action] = utils.dispatchIdentity\n      return obj\n    }, actions))\n  }\n\n  createAction(name, implementation, obj) {\n    return makeAction(this, 'global', name, implementation, obj)\n  }\n\n  createActions(ActionsClass, exportObj = {}, ...argsForConstructor) {\n    const actions = {}\n    const key = utils.uid(\n      this._actionsRegistry,\n      ActionsClass.displayName || ActionsClass.name || 'Unknown'\n    )\n\n    if (fn.isFunction(ActionsClass)) {\n      fn.assign(actions, utils.getPrototypeChain(ActionsClass))\n      class ActionsGenerator extends ActionsClass {\n        constructor(a1,a2,a3,a4,a5,a6,a7,a8) {\n          super(a1,a2,a3,a4,a5,a6,a7,a8)\n        }\n\n        generateActions(...actionNames) {\n          actionNames.forEach((actionName) => {\n            actions[actionName] = utils.dispatchIdentity\n          })\n        }\n      }\n\n      fn.assign(actions, new ActionsGenerator(...argsForConstructor))\n    } else {\n      fn.assign(actions, ActionsClass)\n    }\n\n    this.actions[key] = this.actions[key] || {}\n\n    fn.eachObject((actionName, action) => {\n      if (!fn.isFunction(action)) {\n        exportObj[actionName] = action\n        return\n      }\n\n      // Don't make an action out of method/function with\n      // \"alt:skipMakeAction\" metadata (via @Reflect.metadata decorator)\n      if (typeof Reflect === 'object' && fn.isFunction(Reflect.getOwnMetadata)) {\n        const skip = Reflect.getOwnMetadata('alt:skipMakeAction', action)\n\n        if (skip === true) {\n          exportObj[actionName] = action\n          return\n        }\n      }\n\n      // create the action\n      exportObj[actionName] = makeAction(\n        this,\n        key,\n        actionName,\n        action,\n        exportObj\n      )\n\n      // generate a constant\n      const constant = utils.formatAsConstant(actionName)\n      exportObj[constant] = exportObj[actionName].id\n    }, [actions])\n\n    return exportObj\n  }\n\n  takeSnapshot(...storeNames) {\n    const state = StateFunctions.snapshot(this, storeNames)\n    fn.assign(this._lastSnapshot, state)\n    return this.serialize(state)\n  }\n\n  rollback() {\n    StateFunctions.setAppState(\n      this,\n      this.serialize(this._lastSnapshot),\n      storeInst => {\n        storeInst.lifecycle('rollback')\n        storeInst.emitChange()\n      }\n    )\n  }\n\n  recycle(...storeNames) {\n    const initialSnapshot = storeNames.length\n      ? StateFunctions.filterSnapshots(\n          this,\n          this._initSnapshot,\n          storeNames\n        )\n      : this._initSnapshot\n\n    StateFunctions.setAppState(\n      this,\n      this.serialize(initialSnapshot),\n      (storeInst) => {\n        storeInst.lifecycle('init')\n        storeInst.emitChange()\n      }\n    )\n  }\n\n  flush() {\n    const state = this.serialize(StateFunctions.snapshot(this))\n    this.recycle()\n    return state\n  }\n\n  bootstrap(data) {\n    StateFunctions.setAppState(this, data, (storeInst, state) => {\n      storeInst.lifecycle('bootstrap', state)\n      storeInst.emitChange()\n    })\n  }\n\n  prepare(storeInst, payload) {\n    const data = {}\n    if (!storeInst.displayName) {\n      throw new ReferenceError('Store provided does not have a name')\n    }\n    data[storeInst.displayName] = payload\n    return this.serialize(data)\n  }\n\n  // Instance type methods for injecting alt into your application as context\n\n  addActions(name, ActionsClass, ...args) {\n    this.actions[name] = Array.isArray(ActionsClass)\n      ? this.generateActions.apply(this, ActionsClass)\n      : this.createActions(ActionsClass, ...args)\n  }\n\n  addStore(name, StoreModel, ...args) {\n    this.createStore(StoreModel, name, ...args)\n  }\n\n  getActions(name) {\n    return this.actions[name]\n  }\n\n  getStore(name) {\n    return this.stores[name]\n  }\n\n  static debug(name, alt, win) {\n    const key = 'alt.js.org'\n    let context = win\n    if (!context && typeof window !== 'undefined') {\n      context = window\n    }\n    if (typeof context !== 'undefined') {\n      context[key] = context[key] || []\n      context[key].push({ name, alt })\n    }\n    return alt\n  }\n}\n\nexport default Alt\n"],"names":["require$$0","isFunction","x","isMutableObject","target","Ctor","constructor","Object","prototype","toString","call","isFrozen","type","eachObject","f","o","forEach","from","keys","key","assign","source","value","setAppState","instance","data","onStore","obj","deserialize","store","stores","config","StoreModel","state","onDeserialize","fn","snapshot","storeNames","length","reduce","storeHandle","storeName","displayName","lifecycle","customSnapshot","onSerialize","getState","saveInitialSnapshot","serialize","_initSnapshot","_lastSnapshot","filterSnapshots","ReferenceError","builtIns","getOwnPropertyNames","NoopClass","builtInProto","getInternalMethods","Obj","isProto","excluded","m","indexOf","getPrototypeChain","methods","getPrototypeOf","warn","msg","console","uid","container","name","count","hasOwnProperty","String","formatAsConstant","replace","i","toLowerCase","toUpperCase","dispatchIdentity","undefined","a","concat","fsa","id","payload","details","dispatch","actionObj","alt","namespace","dispatchLater","dispatcher","AltStore","model","lifecycleEvents","transmitter","event","publish","preventDefault","boundListeners","subscriptions","output","emitChange","handleDispatch","e","handlesOwnErrors","publicMethods","dispatchToken","register","actionHandlers","actionListeners","action","otherwise","result","filter","Boolean","every","handler","cb","TypeError","subscribe","dispose","push","subscription","StoreMixin","sources","sourcesArray","Array","isArray","tokens","map","waitFor","asyncMethods","registerAsync","asyncDef","loadCounter","toExport","methodName","desc","spec","validHandlers","Error","args","getInstance","local","shouldFetch","intercept","interceptResponse","makeActionHandler","isError","fire","trapAsync","loading","remote","then","success","error","exportPublicMethods","lifecycleEvent","bus","bind","symbol","actions","matchFirstCharacter","assumedEventHandler","bindAction","listener","doSetState","storeInstance","nextState","setState","isDispatching","createPrototype","proto","extras","createStoreConfig","globalConfig","slice","currentState","transformStore","transforms","Store","transform","createStoreFromObject","StoreProto","bindListeners","observe","eventName","on","createStoreFromClass","a1","a2","a3","a4","a5","a6","a7","a8","argsForClass","datasource","utils","makeAction","implementation","_actionsRegistry","logAs","storeStateToLog","Reflect","getOwnMetadata","inject","diff","optionalArgs","apply","invocationResult","actionResult","isPromise","defer","setTimeout","namespaceId","constant","Alt","JSON","stringify","parse","Dispatcher","batchingFunction","callback","global","storeTransforms","Math","random","substr","fsaDetails","iden","module","hot","actionNames","createActions","ActionsClass","exportObj","ActionsGenerator","actionName","argsForConstructor","skip","StateFunctions","initialSnapshot","storeInst","recycle","generateActions","createStore","debug","win","context","window"],"mappings":"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"}